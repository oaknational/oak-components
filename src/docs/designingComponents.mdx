import { Meta } from "@storybook/blocks";

<Meta title="docs/How to design components" />

# How To Design New Components

## Where to put new components ?

Read the [organisational structure](/docs/docs-organisational-structure--docs) section of this storybook carefully.

## How to name new components ?

Read the [naming conventions](/docs/docs-naming-conventions--docs) section of this storybook carefully.

## What to remember about when creating/updating components ?

#### Component

- Use `OakUiRoleToken` type for colour related props
- Use correct UI role token for seting the colours of your components (ie. `bg-decorative2-main` should be used only to set the background, not font or icon color); if there is a token missing, flag it with design and they will either change the design or create necessary token
- Only pass down the props you want to pass, avoid `{...rest}` operator

#### Deprecated component

When component becomes deprecated:

- add @deprecated tag with explanation of which components to use instead
- add deprecated comment above that (to be displayed in storybook as it ignores @deprecated tag)

```
* ⚠️ To be deprecated
* Use `<OtherComponent>` instead
* @deprecated Use `<OtherComponent />` instead
```

- in addition, add " (deprecated)" in storybook title attribute after a name of that component (e.g. "components/category/OakComponent (deprecated)")

#### Storybook

- Make sure the `title` attribute in the storybook file is correct, this will ensure to keep files in the right subfolder within storybook, ie. `title: "components/Buttons/OakPrimaryButton"`
- Make sure your storybook file exposes relevant props with correct control for each prop (`argTypes` should use the same type as actual prop)

## What is the $ for ?

The $ prefix is used to denote a styled component prop. This is a convention used by the styled-components library.

NB. props which are prefixed with $ are not passed to the underlying DOM element / React function component so be careful not to use them for other props.

## Heuristics for Component Design

Not hard rules, rather principles to aim for:

**Fewer props more components**<br/>
Implement variations by creating separate components **NOT** through props and logic.

**Only expose props which are variable**<br/>
If it doesn't need to change it doesn't need to be a prop.

**Employ inheritance and composition for code reuse**<br/>
Styled components allows for inheritance of style and Typescript allows the extension of prop types. You can also, pass components as children, pass components as props, or return components from functions.

**Follow single responsibility principle**<br/>
Components should do one thing and do it well. This also applies to files.

**Use what is already there**<br/>
Make sure you aren't duplicating functionality that already exists. Don't hard code style when utils are available.

**Call things what they are (even when they are long)**<br/>
Long names are better than ambiguous names.

## Use the component template

The template lives at `src/components/CopyPasteThisComponent`. Copy and paste, replacing the name and other details as relevant.

It contains helpful tips for best practice and a basic structure to get you started.
